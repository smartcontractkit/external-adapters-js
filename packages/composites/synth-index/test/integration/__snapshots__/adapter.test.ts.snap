// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`synth-index X coingecko when making a request to coingecko for sDEFI and coingecko replies with a failure repeatedly should try 3 times and then fail 1`] = `
Object {
  "error": Object {
    "cause": Object {
      "config": Object {
        "baseURL": "http://localhost:8081",
        "data": "{\\"id\\":\\"1\\",\\"data\\":{\\"base\\":[\\"COMP\\",\\"MKR\\",\\"AAVE\\",\\"UMA\\",\\"SNX\\",\\"REN\\",\\"UNI\\",\\"KNC\\",\\"CRV\\",\\"SUSHI\\",\\"YFI\\",\\"BAL\\",\\"BNT\\",\\"1INCH\\"],\\"quote\\":\\"USD\\",\\"endpoint\\":\\"price\\"}}",
        "headers": Object {
          "Accept": "application/json",
          "Cache-Control": "no-cache, no-store, must-revalidate",
          "Content-Length": 151,
          "Content-Type": "application/json;charset=utf-8",
          "Pragma": "no-cache",
          "User-Agent": "axios/0.21.1",
        },
        "maxBodyLength": -1,
        "maxContentLength": -1,
        "method": "post",
        "timeout": 30000,
        "transformRequest": Array [
          null,
        ],
        "transformResponse": Array [
          null,
        ],
        "withCredentials": true,
        "xsrfCookieName": "XSRF-TOKEN",
        "xsrfHeaderName": "X-XSRF-TOKEN",
      },
      "message": "Request failed with status code 500",
      "name": "Error",
      "stack": "Error: Request failed with status code 500
    at createError (/home/justinkaseman/Desktop/dev/external-adapters-js/.yarn/cache/axios-npm-0.21.1-d192f6b3b3-864fb7b5d0.zip/node_modules/axios/lib/core/createError.js:16:15)
    at settle (/home/justinkaseman/Desktop/dev/external-adapters-js/.yarn/cache/axios-npm-0.21.1-d192f6b3b3-864fb7b5d0.zip/node_modules/axios/lib/core/settle.js:17:12)
    at IncomingMessage.handleStreamEnd (/home/justinkaseman/Desktop/dev/external-adapters-js/.yarn/cache/axios-npm-0.21.1-d192f6b3b3-864fb7b5d0.zip/node_modules/axios/lib/adapters/http.js:260:11)
    at IncomingMessage.emit (events.js:315:20)
    at endReadableNT (internal/streams/readable.js:1327:12)
    at processTicksAndRejections (internal/process/task_queues.js:80:21)",
    },
    "message": "Request failed with status code 500",
    "name": "AdapterError",
    "stack": "AdapterError: Request failed with status code 500
    at _retry (/home/justinkaseman/Desktop/dev/external-adapters-js/packages/core/bootstrap/src/lib/external-adapter/requester.ts:50:17)
    at processTicksAndRejections (internal/process/task_queues.js:93:5)
    at _delayRetry (/home/justinkaseman/Desktop/dev/external-adapters-js/packages/core/bootstrap/src/lib/external-adapter/requester.ts:40:16)
    at _retry (/home/justinkaseman/Desktop/dev/external-adapters-js/packages/core/bootstrap/src/lib/external-adapter/requester.ts:53:16)
    at _delayRetry (/home/justinkaseman/Desktop/dev/external-adapters-js/packages/core/bootstrap/src/lib/external-adapter/requester.ts:40:16)
    at _retry (/home/justinkaseman/Desktop/dev/external-adapters-js/packages/core/bootstrap/src/lib/external-adapter/requester.ts:53:16)
    at Function.request (/home/justinkaseman/Desktop/dev/external-adapters-js/packages/core/bootstrap/src/lib/external-adapter/requester.ts:79:12)
    at /home/justinkaseman/Desktop/dev/external-adapters-js/packages/composites/token-allocation/src/dataProvider.ts:48:22
    at computePrice (/home/justinkaseman/Desktop/dev/external-adapters-js/packages/composites/token-allocation/src/adapter.ts:75:19)
    at Object.execute (/home/justinkaseman/Desktop/dev/external-adapters-js/packages/composites/token-allocation/src/adapter.ts:124:21)",
  },
  "jobRunID": "1",
  "status": "errored",
  "statusCode": 500,
}
`;

exports[`synth-index X coingecko when making a request to coingecko for sDEFI and coingecko replies with a success should reply with success 1`] = `
Object {
  "data": Object {
    "payload": Object {
      "1INCH": Object {
        "quote": Object {
          "USD": Object {
            "price": 2.64,
          },
        },
      },
      "AAVE": Object {
        "quote": Object {
          "USD": Object {
            "price": 247.63,
          },
        },
      },
      "BAL": Object {
        "quote": Object {
          "USD": Object {
            "price": 20.9,
          },
        },
      },
      "BNT": Object {
        "quote": Object {
          "USD": Object {
            "price": 3.37,
          },
        },
      },
      "COMP": Object {
        "quote": Object {
          "USD": Object {
            "price": 317.93,
          },
        },
      },
      "CRV": Object {
        "quote": Object {
          "USD": Object {
            "price": 1.83,
          },
        },
      },
      "KNC": Object {
        "quote": Object {
          "USD": Object {
            "price": 1.52,
          },
        },
      },
      "MKR": Object {
        "quote": Object {
          "USD": Object {
            "price": 2459.65,
          },
        },
      },
      "REN": Object {
        "quote": Object {
          "USD": Object {
            "price": 0.390388,
          },
        },
      },
      "SNX": Object {
        "quote": Object {
          "USD": Object {
            "price": 7.37,
          },
        },
      },
      "SUSHI": Object {
        "quote": Object {
          "USD": Object {
            "price": 8.28,
          },
        },
      },
      "UMA": Object {
        "quote": Object {
          "USD": Object {
            "price": 8.91,
          },
        },
      },
      "UNI": Object {
        "quote": Object {
          "USD": Object {
            "price": 18.96,
          },
        },
      },
      "YFI": Object {
        "quote": Object {
          "USD": Object {
            "price": 34189,
          },
        },
      },
    },
    "result": 8724.82575892,
    "sources": Array [],
  },
  "jobRunID": "1",
  "result": 8724.82575892,
  "statusCode": 200,
}
`;

exports[`synth-index X coingecko when making a request to coingecko for sDEFI and coingecko replies with an intermittent failure should try 2 times then respond with a 200 1`] = `
Object {
  "data": Object {
    "payload": Object {
      "1INCH": Object {
        "quote": Object {
          "USD": Object {
            "price": 2.64,
          },
        },
      },
      "AAVE": Object {
        "quote": Object {
          "USD": Object {
            "price": 247.63,
          },
        },
      },
      "BAL": Object {
        "quote": Object {
          "USD": Object {
            "price": 20.9,
          },
        },
      },
      "BNT": Object {
        "quote": Object {
          "USD": Object {
            "price": 3.37,
          },
        },
      },
      "COMP": Object {
        "quote": Object {
          "USD": Object {
            "price": 317.93,
          },
        },
      },
      "CRV": Object {
        "quote": Object {
          "USD": Object {
            "price": 1.83,
          },
        },
      },
      "KNC": Object {
        "quote": Object {
          "USD": Object {
            "price": 1.52,
          },
        },
      },
      "MKR": Object {
        "quote": Object {
          "USD": Object {
            "price": 2459.65,
          },
        },
      },
      "REN": Object {
        "quote": Object {
          "USD": Object {
            "price": 0.390388,
          },
        },
      },
      "SNX": Object {
        "quote": Object {
          "USD": Object {
            "price": 7.37,
          },
        },
      },
      "SUSHI": Object {
        "quote": Object {
          "USD": Object {
            "price": 8.28,
          },
        },
      },
      "UMA": Object {
        "quote": Object {
          "USD": Object {
            "price": 8.91,
          },
        },
      },
      "UNI": Object {
        "quote": Object {
          "USD": Object {
            "price": 18.96,
          },
        },
      },
      "YFI": Object {
        "quote": Object {
          "USD": Object {
            "price": 34189,
          },
        },
      },
    },
    "result": 8724.82575892,
    "sources": Array [],
  },
  "jobRunID": "1",
  "result": 8724.82575892,
  "statusCode": 200,
}
`;
