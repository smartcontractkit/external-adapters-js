import { AdapterRequest } from '@chainlink/ea-bootstrap'
import nock from 'nock'

export const mockGetBlockByNumber = (): nock.Scope =>
  nock('http://localhost:8545')
    .persist()
    .post('/', {
      method: 'eth_getBlockByNumber',
      params: ['0xda374a', true],
      id: /^\d+$/,
      jsonrpc: '2.0',
    })
    .reply(
      200,
      (_, request: AdapterRequest) => ({
        jsonrpc: '2.0',
        id: request['id'],
        result: {
          baseFeePerGas: '0x830804db0',
          difficulty: '0x2d5936042f0571',
          extraData: '0x486976656f6e2065752d6865617679',
          gasLimit: '0x1c9c380',
          gasUsed: '0xe90451',
          hash: '0x18506e69ce20c9934f593354a3c85789c9852f66639d755dfb3a1def229548ee',
          logsBloom:
            '0x8d66432621705949f3803c4080911f04d8134eed34428227901cac8ea7620d39141d91783461044470e9df1503910df49a2fc601a947e9802e220803ebfca3e80e3819405b06632ac946a639ff644d282a215a2c734039d228d4a5ddca49f209bac368242a24325581047208b8286c48341614d40d513e01d250109a838c6b0c3c52852303617177321b043191a2c08d584a3cafa14a0cd898e324ea8b9f98a582b0a23911e8bf300e31c7918c1c59e01ae250c7051940cc192408c6940a885ae122ad26ca0219d817a2c01285471217746d129104eb4e94750c7537060161710c382319408acc0c25829c42484358f25a50909af0e2c146104109baae321431',
          miner: '0x1ad91ee08f21be3de0ba2ba6918e714da6b45836',
          mixHash: '0xc8a3daed56d1e99f8e8c250fb258680bfd7ce3b77c42db4eb0d4ddeeebb0ac20',
          nonce: '0x63f856bcffe3dae6',
          number: '0xda374a',
          parentHash: '0xc38741d0df74d5f1da784f6a35dd5b6c150b86a57205a0e0a660111a20abc47f',
          receiptsRoot: '0xf2d32c713cd95445cd65b1b876560b3e91d0c01f87bdfe2f2fa9d4777ce0516a',
          sha3Uncles: '0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347',
          size: '0x12f31',
          stateRoot: '0xe27f429a362476179a902cb1c7c0e717f23fa6da1564f730ea9a12b68b6b4efc',
          timestamp: '0x621e0be9',
          totalDifficulty: '0x90a928906c6cadb5571',
          transactions: [
            {
              accessList: [],
              blockHash: '0x18506e69ce20c9934f593354a3c85789c9852f66639d755dfb3a1def229548ee',
              blockNumber: '0xda374a',
              chainId: '0x1',
              from: '0x7eab2a69cb7f54aa502f9b9c6a99f4d0fc4b679a',
              gas: '0x927c0',
              gasPrice: '0x15a11b25ac',
              hash: '0x17942fd3f4c92eee59775b594534c11ee346cbf870f973409a3a7c016f8849d1',
              input:
                '0x665de04d0000000000000000000000007f268357a8c2552623316e2562d90e642bb538e50000000000000000000000002de3c9618cc7f777166d2e2cd5b560ed49951e79000000000000000000000000baf2127b49fc93cbca6269fade0f7f31df4c88a700000000000000000000000000000000000000000000000000000000000000000000000000000000000000005b3256965e7c3cf26e11fcaf296dfc8807c01073000000000000000000000000a51854846191d4d881eb00a898b4a5a80c9f174b00000000000000000000000080ab79e5c36351fb5dbe2b35e97f724eca47ae290000000000000000000000006708694365f35b2b874ad7f8ce0483ce0c2dc30100000000000000000000000000000000000000000000000000000000000004e2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d1413ce9454000000000000000000000000000000000000000000000000000063eb89da4ed0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000621e0ba30000000000000000000000000000000000000000000000000000000000000000751923580917dd8cec4f624046c9d32fdbc99afcebfb498f91bdcbe95542a0a4000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000621e0b9b00000000000000000000000000000000000000000000000000000000621f240cbba77cf79276218abcf785b1341fac5c8c69130a5e4b0f73b4afac29dd9654c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000621d37b700000000000000000000000000000000000000000000000000000000621e898c1ccb45a2dd6a5c12d33e2c3418ac5d9fb5ce890f8e21482a08fae92298ff20a4000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000621e0ba30000000000000000000000000000000000000000000000000000000000000000418df3ecd5c7d25eddd0e7b849426ca5789d3402df10f59078c4e3ae92884f2e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000083700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000005e0000000000000000000000000000000000000000000000000000000000000001b000000000000000000000000000000000000000000000000000000000000001b000000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000000000000000000000000000001c85cdf9b77f8dd0cb458f5cf76e899d3997f4b35c660c567ac8304615728270847d5cc13bb649e4f2d2319c7c90480836ab766443231f7d8aaf13a9cd5d0fcbc7bf43b6b4d00c3fd49bdf2a42e7a09d690038dddf4ce2a56c66ea62fe092a09b123a473622f769f3bbafc5b4c710b9423cdbeaf2a3f34e5331c46ac27de36439e000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000000000000260000000000000000000000000000000000000000000000000000000000000038000000000000000000000000000000000000000000000000000000000000004a000000000000000000000000000000000000000000000000000000000000005c0000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000006400000000000000000000000000000000000000000000000000000000000000760000000000000000000000000000000000000000000000000000000000000088000000000000000000000000000000000000000000000000000000000000008c000000000000000000000000000000000000000000000000000000000000000e400000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e4000000000000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e4fb16a5950000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c8bea9387557e0540f30bf1583fb8cfc53c0089700000000000000000000000080ab79e5c36351fb5dbe2b35e97f724eca47ae290000000000000000000000000000000000000000000000000000000000000837000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e4fb16a5950000000000000000000000002de3c9618cc7f777166d2e2cd5b560ed49951e79000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080ab79e5c36351fb5dbe2b35e97f724eca47ae290000000000000000000000000000000000000000000000000000000000000837000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e4fb16a5950000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a51854846191d4d881eb00a898b4a5a80c9f174b00000000000000000000000080ab79e5c36351fb5dbe2b35e97f724eca47ae290000000000000000000000000000000000000000000000000000000000000837000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e4fb16a595000000000000000000000000c8bea9387557e0540f30bf1583fb8cfc53c00897000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080ab79e5c36351fb5dbe2b35e97f724eca47ae290000000000000000000000000000000000000000000000000000000000000837000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
              maxFeePerGas: '0x17958274f0',
              maxPriorityFeePerGas: '0xd709ad7fc',
              nonce: '0x4e6',
              r: '0x976c2286a9f0769868cf2bc8ed6e0f063a7e8d172c3ff92e01efd7127c69d515',
              s: '0x2817e183e012424bb7a12c6879c840a47185f2cc0767831506e049a92942f1f2',
              to: '0xc8bea9387557e0540f30bf1583fb8cfc53c00897',
              transactionIndex: '0x0',
              type: '0x2',
              v: '0x1',
              value: '0xd1413ce9454000',
            },
            {
              accessList: [],
              blockHash: '0x18506e69ce20c9934f593354a3c85789c9852f66639d755dfb3a1def229548ee',
              blockNumber: '0xda374a',
              chainId: '0x1',
              from: '0x4f52b520ce7b75ce0f39247f4da5342bcf2a3214',
              gas: '0x8e170',
              gasPrice: '0x14046ac9b0',
              hash: '0x6d96bdb9684c7524dbffe1d2d80c72d5eb9f4bf01171e475a2517fa86dff22ad',
              input:
                '0x5d8b72db000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc200000000000000000000000004fa0d235c4abf4bcf4787af4cf447de572ef8280000000000000000000000000000000000000000000000000000000000000bb80000000000000000000000000000000000000000000000005eb74556f00a800000000000000000000000000000000000000000000000006f98acda1f6b630000000000000000000000000000960e018de0656ae472527241b25145f0695e0eb000000000000000000000000000000000000000000000000000000000621e0caa',
              maxFeePerGas: '0x2059bb635d',
              maxPriorityFeePerGas: '0xbd3ea7c00',
              nonce: '0xf11d',
              r: '0x569a3888e96045d8fa1e02f1b38832b9db904e0e17838e31519219116b8ee75c',
              s: '0x879267257732e83c0de3dafb882699297c7886d695483cb0bfc849c0c568cc3',
              to: '0x96fde36d6b80c8dbe113ea86c96d016ee3aa617a',
              transactionIndex: '0x1',
              type: '0x2',
              v: '0x1',
              value: '0x5eb74556f00a8000',
            },
          ],
        },
      }),
      [
        'Content-Type',
        'application/json',
        'Connection',
        'close',
        'Vary',
        'Accept-Encoding',
        'Vary',
        'Origin',
      ],
    )

export const mockWSResponse = {
  request: {
    id: '1',
    method: 'eth_subscribe',
    params: ['newHeads'],
  },
  response: [
    {
      jsonrpc: '2.0',
      id: '1',
      result: '0x41000e9c254696841c27e2f7c8b9e1eab1ffd1ff33b3',
    },
    {
      jsonrpc: '2.0',
      method: 'eth_subscription',
      params: {
        subscription: '0x41000eabbe15d71cf8172f7b670a1f54cfd20b6273d0',
        result: {
          number: '0xda374a',
          hash: '0x18506e69ce20c9934f593354a3c85789c9852f66639d755dfb3a1def229548ee',
          parentHash: '0xc38741d0df74d5f1da784f6a35dd5b6c150b86a57205a0e0a660111a20abc47f',
          sha3Uncles: '0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347',
          logsBloom:
            '0x8d66432621705949f3803c4080911f04d8134eed34428227901cac8ea7620d39141d91783461044470e9df1503910df49a2fc601a947e9802e220803ebfca3e80e3819405b06632ac946a639ff644d282a215a2c734039d228d4a5ddca49f209bac368242a24325581047208b8286c48341614d40d513e01d250109a838c6b0c3c52852303617177321b043191a2c08d584a3cafa14a0cd898e324ea8b9f98a582b0a23911e8bf300e31c7918c1c59e01ae250c7051940cc192408c6940a885ae122ad26ca0219d817a2c01285471217746d129104eb4e94750c7537060161710c382319408acc0c25829c42484358f25a50909af0e2c146104109baae321431',
          transactionsRoot: '0xe2aea61bb1643d2cadde9ad5f86d0513d7639ef3fe46bd7c63444013f9eeab23',
          stateRoot: '0xe27f429a362476179a902cb1c7c0e717f23fa6da1564f730ea9a12b68b6b4efc',
          receiptsRoot: '0xf2d32c713cd95445cd65b1b876560b3e91d0c01f87bdfe2f2fa9d4777ce0516a',
          miner: '0x1ad91ee08f21be3de0ba2ba6918e714da6b45836',
          difficulty: '0x2d5936042f0571',
          extraData: '0x486976656f6e2065752d6865617679',
          gasLimit: '0x1c9c380',
          gasUsed: '0xe90451',
          timestamp: '0x621e0be9',
          baseFeePerGas: '0x830804db0',
          nonce: '0x63f856bcffe3dae6',
          mixHash: '0xc8a3daed56d1e99f8e8c250fb258680bfd7ce3b77c42db4eb0d4ddeeebb0ac20',
        },
      },
    },
  ],
}
