# REQUIRED: Basic adapter information
adapter_name: {{adapter_name}} # e.g. asseto-finance
adapter_type: {{adapter_type}} # e.g. source
description: {{description}} # e.g. External Adapter for querying NAV and Reserves (PoR) endpoints for Asseto tokenized funds (AoABT, CASH+, AoMMF)

# REQUIRED:  API protocol configuration
data_source_base_url:
  base_url: {{base_url}} # e.g. https://provider.example.com/api

# REQUIRED: Authentication configurations
# Choose one of the following authentication types: oauth | bearer_token | basic | api_key | none and remove the other authentication types
# And add the appropriate credentials for the chosen authentication type using provided fileds or modify the fields as needed
data_source_authentication:
  type: {{auth_type}} # e.g. oauth | bearer_token | basic | api_key | none

  # -------- OAuth (Client Credentials or similar) --------
  credentials:
    oauth_endpoint: {{oauth_endpoint}} # e.g. https://provider.example.com/api/oauth/token
    token_request:
      method: {{oauth_method}}             # e.g. POST
      content_type: {{oauth_content_type}} # e.g. application/json
      body_parameters:
        clientId: {{client_id}} # e.g. chainlink_18
        clientSecret: "{{client_secret_env}}" # e.g. {CLIENT_SECRET}
        grant_type: {{grant_type}}         # e.g. client_credentials
    token_response:
      access_token_field: {{access_token_field}}   # e.g. access_token
    token_usage:
      header_name: {{oauth_header_name}}           # e.g. Authorization
      header_format: {{oauth_header_format}}       # e.g. "Bearer {access_token}"
    background_execute_ms: {{background_execute_ms}} # e.g. 10000
    token_expiration_seconds: {{token_expiration_seconds}} # e.g. 604800

  # -------- Bearer Token --------
  credentials:
    token: "{{bearer_token_env}}" # e.g. {API_TOKEN}
  token_usage:
    header_name: Authorization
    header_format: "Bearer {token}"

  # -------- HTTP Basic --------
  credentials:
    username: "{{basic_username_env}}" # e.g. {API_USER}
    password: "{{basic_password_env}}" # e.g. {API_PASSWORD}
  token_usage:
    header_name: Authorization
    header_format: "Basic {base64(username:password)}"

  # -------- API Key (Header or Query) --------
  credentials:
    key: "{{api_key_env}}"            # e.g. {API_KEY}
    type: "{{api_key_type}}"          # "header" | "query"
    name: "{{api_key_name}}"          # e.g. X-API-Key or api_key or key or other

# REQUIRED: Endpoints definitions, please replace with the actual endpoints definitions and add as many endpoints as needed
data_source_endpoints:
  - name: {{endpoint_name}}               # e.g. reserves
    method: {{HTTP_METHOD}}           # e.g. GET
    path: {{endpoint_path}}               # e.g. /api/funds/{fundId}/reserves
    description: {{description}} # e.g. Query total AUM (Proof of Reserves) for a specific fund
    parameters:
      required: {{required_params}}  # e.g. [fundId]
      optional: {{optional_params}}  # e.g. [startDate, endDate]
    headers:
      - key: accept
        value: application/json
      - key: {{auth_header_key}}  # e.g. Authorization
        value: {{auth_header_value}} # e.g. Bearer {oauth_token} or {api_key} or {basic_token}
    timeout_ms: {{timeout_ms}}   # e.g. 10000
    rate_limit:
      requests_per_second: {{rps}}   # e.g. 10
      burst_size: {{burst_size}}          # e.g. 20
    # REQUIRED: Sample response from the DP endpoint, following is an example response, please replace with the actual response
    endpoint_tested: true | false
    sample_response: | 
      {
        "code": 0,
        "message": "success",
        "data": {
          "list": [
            {
              "fundId": 8,
              "fundName": "CashPlus_BSC",
              "netAssetValueDate": "2025-08-25",
              "netAssetValue": "105.117",
              "assetsUnderManagement": "1001180.979948",
              "outstandingShares": "9524.444",
              "netIncomeExpenses": "0"
            },
            {
              "fundId": 8,
              "fundName": "CashPlus_BSC",
              "netAssetValueDate": "2024-08-09",
              "netAssetValue": "100",
              "assetsUnderManagement": "0",
              "outstandingShares": "0",
              "netIncomeExpenses": "0"
            }
          ]
        },
        "timestamp": 1757321913,
        "traceID": "9421df2ff842631820b6dc38c009f7b6"
      }
 
    # OPTIONAL: Mapping response fields from the DP endpoint to the EA output fields
    # keys are the EA output fields, values are the DP endpoint response fields
    # in the below example, EA output field result takes the value from the DP endpoint response field data.totalAum
    response_mapping: # following is an example mapping, please replace with the actual mapping
      result_field: data.totalAum
      ripcord_field: data.ripcord    
      timestamp_field: data.updatedAt

    # Data freshness validation
    data_freshness:
      timestamp_field: {{timestamp_field}} # e.g. data.updatedAt
      max_age_seconds: {{max_age_seconds}} # e.g. 86400

# REQUIRED: External Adapter Specifications for the EA, please replace with the actual specifications and add as many endpoints as needed
# This section defines the specifications for the EA to be built
external_adapter_specifications:
  # REQUIRED: Environment variables for the EA, add or modify as needed
  environment_variables:
    - API_ENDPOINT: API_ENDPOINT
    - CLIENT_ID: CLIENT_ID
    - CLIENT_SECRET: CLIENT_SECRET
    - GRANT_TYPE: GRANT_TYPE
    - BACKGROUND_EXECUTE_MS: BACKGROUND_EXECUTE_MS
  # REQUIRED: Endpoints for the EA, add more endpoints or modify as needed
  endpoints:
    - name: endpoint_name # e.g. nav | reserves | price | lwba | other
      description: endpoint_description # e.g. net asset value of the fund
      input_parameters:
        - name: param_name # e.g. fundId | symbol | other
          type: number | string | boolean | other
          description: param_description # e.g. The fund id of the NAV to query
          required: true | false
          default: null
  # REQUIRED: Request and response schemas for the EA endpoints above
  endpoint_request_response_examples:
    - endpoint: endpoint_name # e.g. nav | reserves | price | lwba | other
      # following is an example of request and response, please replace with the actual request and response
      request: |
        {
          "data": {
            "endpoint": "reserves",
            "fundId": 8
          }
        }
      response: |
        {
          "statusCode": 200,
          "result": 0,
          "data": {
            "fundId": 8,
            "fundName": "CashPlus_BSC",
            "totalAUM": 0,
            "totalDate": "2025-09-22 20:00:01",
            "ripcord": false
          },
          "timestamps": {
            "providerDataRequestedUnixMs": 978347471111,
            "providerDataReceivedUnixMs": 978347471111,
            "providerIndicatedTimeUnixMs": 1758542882000
          }
        }

# Metadata for the Data Provider
data_source:
  provider_name: {{provider_name}}
  api_documentation_url: {{api_docs_url}}
  api_base_documentation: {{api_base_docs_note}}
  support_contact: {{support_contact}}

# JIRA and Project Metadata for the EA
metadata:
  business_owner: {{business_owner}}
  technical_owner: {{technical_owner}}
  jira_ticket: {{jira_ticket}}
  deployment_chains:
    - {{deployment_chain}} # e.g. arbitrum | bsc | ethereum-mainnet